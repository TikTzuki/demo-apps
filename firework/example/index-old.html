<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Firework Component Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      color: white;
      text-align: center;
      margin-bottom: 30px;
      font-size: 3rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .demo-section {
      background: white;
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .demo-section h2 {
      color: #333;
      margin-bottom: 15px;
      font-size: 1.5rem;
    }

    .demo-section p {
      color: #666;
      margin-bottom: 20px;
      line-height: 1.6;
    }

    #canvas-demo {
      width: 100%;
      height: 400px;
      background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
      border-radius: 8px;
      overflow: hidden;
    }

    .button-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .trigger-button {
      padding: 15px 30px;
      font-size: 16px;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      color: white;
    }

    .trigger-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
    }

    .trigger-button:active {
      transform: translateY(0);
    }

    .btn-golden {
      background: linear-gradient(135deg, #ffd700, #ff8c00);
    }

    .btn-rainbow {
      background: linear-gradient(135deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
    }

    .btn-neon {
      background: linear-gradient(135deg, #00ffff, #ff00ff);
    }

    .btn-pastel {
      background: linear-gradient(135deg, #ffb3ba, #bae1ff);
      color: #333;
    }

    .btn-cosmic {
      background: linear-gradient(135deg, #0a0a2e, #e94560);
    }

    .btn-default {
      background: linear-gradient(135deg, #667eea, #764ba2);
    }

    .info-box {
      background: #f8f9fa;
      border-left: 4px solid #667eea;
      padding: 15px;
      margin-top: 20px;
      border-radius: 4px;
    }

    .info-box code {
      background: #e9ecef;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
    }

    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .feature-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      border-top: 3px solid #667eea;
    }

    .feature-card h3 {
      color: #333;
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    .feature-card ul {
      list-style: none;
      padding-left: 0;
    }

    .feature-card li {
      color: #666;
      padding: 5px 0;
      padding-left: 20px;
      position: relative;
    }

    .feature-card li:before {
      content: "‚ú®";
      position: absolute;
      left: 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéÜ Firework Component Demo üéÜ</h1>

    <!-- Canvas Demo Section -->
    <div class="demo-section">
      <h2>1. FireworkCanvas Component</h2>
      <p>Click anywhere on the canvas below to launch fireworks! The canvas automatically handles particle rendering and animation.</p>
      <div id="canvas-demo"></div>
      <div class="info-box">
        <strong>Usage:</strong> <code>&lt;FireworkCanvas autoLaunch={true} width={800} height={400} /&gt;</code>
      </div>
    </div>

    <!-- Trigger Demo Section -->
    <div class="demo-section">
      <h2>2. FireworkTrigger Component with Plugins</h2>
      <p>Click any button below to trigger fireworks with different themes using built-in plugins!</p>
      <div class="button-grid">
        <button id="btn-default" class="trigger-button btn-default">Default</button>
        <button id="btn-golden" class="trigger-button btn-golden">Golden</button>
        <button id="btn-rainbow" class="trigger-button btn-rainbow">Rainbow</button>
        <button id="btn-neon" class="trigger-button btn-neon">Neon</button>
        <button id="btn-pastel" class="trigger-button btn-pastel">Pastel</button>
        <button id="btn-cosmic" class="trigger-button btn-cosmic">Cosmic</button>
      </div>
      <div class="info-box">
        <strong>Usage:</strong> <code>&lt;FireworkTrigger config={applyPlugin(goldenPlugin)}&gt;Click Me&lt;/FireworkTrigger&gt;</code>
      </div>
    </div>

    <!-- Features Section -->
    <div class="demo-section">
      <h2>3. Features & Customization</h2>
      <div class="features">
        <div class="feature-card">
          <h3>üé® Plugins</h3>
          <ul>
            <li>Golden</li>
            <li>Rainbow</li>
            <li>Neon</li>
            <li>Pastel</li>
            <li>Cosmic</li>
            <li>Custom plugins</li>
          </ul>
        </div>
        <div class="feature-card">
          <h3>‚öôÔ∏è Configuration</h3>
          <ul>
            <li>Particle count</li>
            <li>Size range</li>
            <li>Colors array</li>
            <li>Gravity & friction</li>
            <li>Spread angle</li>
            <li>Initial velocity</li>
          </ul>
        </div>
        <div class="feature-card">
          <h3>üöÄ Components</h3>
          <ul>
            <li>FireworkCanvas</li>
            <li>FireworkTrigger</li>
            <li>useFirework hook</li>
            <li>Auto-launch mode</li>
            <li>Click-to-launch</li>
            <li>Portal rendering</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- React and ReactDOM from CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Demo Script -->
  <script type="module">
    // Import the library (in a real scenario, this would be from npm)
    // For this demo, we'll use the built version
    import * as Firework from '../dist/index.mjs';

    const { FireworkCanvas, FireworkTrigger, applyPlugin, goldenPlugin, rainbowPlugin, neonPlugin, pastelPlugin, cosmicPlugin, DEFAULT_CONFIG } = Firework;

    // Render Canvas Demo
    const canvasContainer = document.getElementById('canvas-demo');
    const canvasRoot = ReactDOM.createRoot(canvasContainer);
    canvasRoot.render(
      React.createElement(FireworkCanvas, {
        autoLaunch: true,
        launchInterval: 2000,
        width: canvasContainer.clientWidth,
        height: 400,
        config: {
          particleCount: 70,
          colors: ['#ff0000', '#ff7f00', '#ffff00', '#00ff00', '#0000ff', '#4b0082', '#9400d3', '#ff1493', '#00ffff', '#ffd700'],
        }
      })
    );

    // Helper function to create trigger effect
    function createTriggerEffect(buttonId, config) {
      const button = document.getElementById(buttonId);
      button.addEventListener('click', (e) => {
        const rect = button.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top + rect.height / 2;

        // Create a temporary container for the effect
        let portal = document.getElementById('firework-portal');
        if (!portal) {
          portal = document.createElement('div');
          portal.id = 'firework-portal';
          portal.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;overflow:hidden;';
          document.body.appendChild(portal);
        }

        // Use the hook to create particles
        const particles = createParticles(x, y, config);
        renderParticles(particles, portal);
      });
    }

    // Simple particle creation
    function createParticles(x, y, config) {
      const mergedConfig = { ...DEFAULT_CONFIG, ...config };
      const particles = [];
      const { particleCount, minSize, maxSize, colors, spread, initialVelocity } = mergedConfig;

      for (let i = 0; i < particleCount; i++) {
        const angle = Math.random() * spread - spread / 2 - Math.PI / 2;
        const velocity = initialVelocity * (0.5 + Math.random() * 0.5);
        const size = minSize + Math.random() * (maxSize - minSize);
        const maxLife = 60 + Math.random() * 60;

        particles.push({
          id: Math.random(),
          x, y,
          vx: Math.cos(angle) * velocity,
          vy: Math.sin(angle) * velocity,
          color: colors[Math.floor(Math.random() * colors.length)],
          size,
          life: maxLife,
          maxLife,
        });
      }
      return particles;
    }

    // Render and animate particles
    function renderParticles(particles, container) {
      const elements = particles.map(p => {
        const el = document.createElement('div');
        el.style.cssText = `position:absolute;left:${p.x}px;top:${p.y}px;width:${p.size}px;height:${p.size}px;border-radius:50%;background-color:${p.color};transform:translate(-50%,-50%);pointer-events:none;`;
        container.appendChild(el);
        return { el, particle: p };
      });

      const gravity = 0.1;
      const friction = 0.99;
      const fadeRate = 0.02;

      function animate() {
        let alive = false;
        elements.forEach(({ el, particle }) => {
          if (particle.life > 0) {
            particle.x += particle.vx;
            particle.y += particle.vy;
            particle.vx *= friction;
            particle.vy = particle.vy * friction + gravity;
            particle.life -= fadeRate * 60;

            const alpha = Math.max(0, particle.life / particle.maxLife);
            el.style.left = particle.x + 'px';
            el.style.top = particle.y + 'px';
            el.style.opacity = alpha;
            alive = true;
          }
        });

        if (alive) {
          requestAnimationFrame(animate);
        } else {
          elements.forEach(({ el }) => el.remove());
        }
      }

      animate();
    }

    // Setup button triggers
    createTriggerEffect('btn-default', DEFAULT_CONFIG);
    createTriggerEffect('btn-golden', applyPlugin(goldenPlugin));
    createTriggerEffect('btn-rainbow', applyPlugin(rainbowPlugin));
    createTriggerEffect('btn-neon', applyPlugin(neonPlugin));
    createTriggerEffect('btn-pastel', applyPlugin(pastelPlugin));
    createTriggerEffect('btn-cosmic', applyPlugin(cosmicPlugin));
  </script>
</body>
</html>
